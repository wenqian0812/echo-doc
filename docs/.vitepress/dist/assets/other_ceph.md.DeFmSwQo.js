import{_ as s,c as a,o as e,a2 as p}from"./chunks/framework.mlmjWbz3.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"other/ceph.md","filePath":"other/ceph.md"}'),n={name:"other/ceph.md"},i=p(`<h2 id="cephadm-å®‰è£…ceph-v15å‡†å¤‡" tabindex="-1"><code>cephadm</code> å®‰è£…<code>ceph v15</code>å‡†å¤‡ <a class="header-anchor" href="#cephadm-å®‰è£…ceph-v15å‡†å¤‡" aria-label="Permalink to &quot;\`cephadm\` å®‰è£…\`ceph v15\`å‡†å¤‡&quot;">â€‹</a></h2><p>å‚è€ƒå®‰è£…æ–‡æ¡£, æœ‰é—®é¢˜å¯ä»¥ç›´æ¥ç•™è¨€ï¼Œå¤§å®¶ä¸€èµ·äº¤æµï¼Œä»¥ä¸‹éƒ½æ˜¯éƒ¨ç½²çš„æ¯”è¾ƒåŸºç¡€çš„ä¸œè¥¿</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>https://docs.ceph.com/en/latest/cephadm/</span></span>
<span class="line"><span>http://www.dtmao.cc/news_show_1027422.shtml</span></span></code></pre></div><blockquote><p>ç”¨çš„é˜¿é‡Œäº‘çš„ä¸‰å°æœºå™¨è¿›è¡Œæµ‹è¯•ï¼Œå…¶ä¸­æ¯å°æœºå™¨æŒ‚è½½äº†ä¸€å—40Gçš„æ•°æ®ç›˜ï¼Œç³»ç»Ÿç›˜ä¹Ÿä¸º40Gï¼Œç³»ç»Ÿä¸ºcentos7.8</p></blockquote><ul><li>ä¸‰å°æœåŠ¡å™¨</li></ul><table><thead><tr><th>hostname</th><th>IP</th></tr></thead><tbody><tr><td>node1</td><td>172.16.2.186</td></tr><tr><td>node2</td><td>172.16.2.184</td></tr><tr><td>node3</td><td>172.16.2.184</td></tr></tbody></table><ul><li>å®‰è£…<code>docker</code></li></ul><p>å‚è€ƒ<a href="https://www.runoob.com/docker/centos-docker-install.html" target="_blank" rel="noreferrer">https://www.runoob.com/docker/centos-docker-install.html</a></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span></span></code></pre></div><ul><li>è®¾ç½®hostnameå’Œä¿®æ”¹hostsï¼ˆæ¯å°æœåŠ¡å™¨éƒ½éœ€è¦è®¾ç½®hostnameå’Œä¿®æ”¹hostsæ–‡ä»¶ï¼‰</li></ul><p>è®¾ç½®hostname</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>vim /etc/hostname ç„¶åå†™å…¥hostnameå³å¯</span></span>
<span class="line"><span></span></span>
<span class="line"><span>hostnamectl set-hostname node1</span></span></code></pre></div><p>ä¿®æ”¹hosts(å¦‚ä¸‹å›¾æ‰€ç¤º)</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>vim /etc/hosts</span></span></code></pre></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4771adca05e342b0a92ef2cc348e8a21~tplv-k3u1fbpfcp-watermark.image" alt=""></p><ul><li>ç¦ç”¨é˜²ç«å¢™</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop firewalld</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable firewalld</span></span></code></pre></div><p><strong>æ¥ä¸‹æ¥å°±å¼€å§‹æˆ‘ä»¬çš„å®‰è£…ä¹‹æ—…æŠŠï¼</strong></p><h2 id="è·å–cephadm" tabindex="-1">è·å–<code>cephadm</code> <a class="header-anchor" href="#è·å–cephadm" aria-label="Permalink to &quot;è·å–\`cephadm\`&quot;">â€‹</a></h2><blockquote><p><code>cephadm</code>å…¶å®å°±ä¸ª<code>python3</code>çš„è„šæœ¬è€Œå·²</p></blockquote><p>è¿æ¥åˆ°<code>node1</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/ceph/ceph/octopus/src/cephadm/cephadm</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚æœwgetä¸åˆ°è¯¥æ–‡ä»¶ ç›´æ¥æµè§ˆå™¨è®¿é—®å¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°æ–°å»ºæ–‡ä»¶cephadmå³å¯</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èµ‹äºˆæ‰§è¡Œæƒé™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x cephadm</span></span></code></pre></div><h2 id="è·å–è½¯ä»¶åŒ…" tabindex="-1">è·å–è½¯ä»¶åŒ… <a class="header-anchor" href="#è·å–è½¯ä»¶åŒ…" aria-label="Permalink to &quot;è·å–è½¯ä»¶åŒ…&quot;">â€‹</a></h2><ul><li>å°½ç®¡ç‹¬ç«‹è„šæœ¬è¶³ä»¥å¯åŠ¨ç¾¤é›†ï¼Œä½†æ˜¯cephadmåœ¨ä¸»æœºä¸Šå®‰è£…å‘½ä»¤å¾ˆæ–¹ä¾¿ã€‚è¦å®‰è£…æä¾›cephadmå…«è¾¾é€šå‘è¡Œç‰ˆå‘½ä»¤çš„è½¯ä»¶åŒ…ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./cephadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add-repo --release octopus</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./cephadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><ul><li>cephadmé€šè¿‡è¿è¡Œwhichä»¥ä¸‹å‘½ä»¤æ¥ç¡®è®¤è¯¥è·¯å¾„ç°åœ¨ä½äºæ‚¨çš„PATHä¸­ï¼š</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>which cephadm</span></span></code></pre></div><ul><li>æˆåŠŸçš„å‘½ä»¤å°†è¿”å›ä»¥ä¸‹å†…å®¹ï¼šwhich cephadm</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>/usr/sbin/cephadm</span></span></code></pre></div><h2 id="å¼•å¯¼æ–°çš„é›†ç¾¤" tabindex="-1">å¼•å¯¼æ–°çš„é›†ç¾¤ <a class="header-anchor" href="#å¼•å¯¼æ–°çš„é›†ç¾¤" aria-label="Permalink to &quot;å¼•å¯¼æ–°çš„é›†ç¾¤&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 172.16.2.186ä¸ºnode1çš„IP</span></span>
<span class="line"><span>cephadm bootstrap --mon-ip 172.16.2.186</span></span></code></pre></div><blockquote><p>å®‰è£…å®Œæˆåä¼šè¿”å›ä¸€ä¸ªdashboardé¡µé¢ ç›´æ¥ä½¿ç”¨å…¬ç½‘IPè®¿é—®å³å¯ï¼Œä¸»è¦ç¡®ä¿å®‰å…¨ç»„çš„ç«¯å£ç•…é€š</p></blockquote><h2 id="å°†ä¸»æœºæ·»åŠ åˆ°é›†ç¾¤ä¸­" tabindex="-1">å°†ä¸»æœºæ·»åŠ åˆ°é›†ç¾¤ä¸­ <a class="header-anchor" href="#å°†ä¸»æœºæ·»åŠ åˆ°é›†ç¾¤ä¸­" aria-label="Permalink to &quot;å°†ä¸»æœºæ·»åŠ åˆ°é›†ç¾¤ä¸­&quot;">â€‹</a></h2><p>è¦å°†æ¯ä¸ªæ–°ä¸»æœºæ·»åŠ åˆ°ç¾¤é›†ï¼Œè¯·æ‰§è¡Œä¸¤ä¸ªæ­¥éª¤ï¼š</p><p>åœ¨æ–°ä¸»æœºçš„æ ¹ç”¨æˆ·authorized_keysæ–‡ä»¶ä¸­å®‰è£…ç¾¤é›†çš„å…¬å…±SSHå¯†é’¥ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ssh-copy-id -f -i /etc/ceph/ceph.pub root@*&lt;new-host&gt;*</span></span></code></pre></div><p>ä¾‹å¦‚ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ssh-copy-id -f -i /etc/ceph/ceph.pub root@node1</span></span>
<span class="line"><span>ssh-copy-id -f -i /etc/ceph/ceph.pub root@node2</span></span></code></pre></div><p>å‘Šè¯‰Cephï¼Œæ–°èŠ‚ç‚¹æ˜¯é›†ç¾¤çš„ä¸€éƒ¨åˆ†ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ceph orch host add *newhost*</span></span></code></pre></div><p>ä¾‹å¦‚ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ceph orch host add node1</span></span>
<span class="line"><span>ceph orch host add node1</span></span></code></pre></div><ol start="5"><li>å°†ç£ç›˜è½¬åŒ–ä¸ºosd</li></ol><p>æœ‰å‡ ç§åˆ›å»ºæ–°OSDçš„æ–¹æ³•ï¼š</p><p>å‘Šè¯‰Cephä½¿ç”¨ä»»ä½•å¯ç”¨å’Œæœªä½¿ç”¨çš„å­˜å‚¨è®¾å¤‡ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ceph orch apply osd --all-available-devices</span></span></code></pre></div><p>ä»ç‰¹å®šä¸»æœºä¸Šçš„ç‰¹å®šè®¾å¤‡åˆ›å»ºOSDï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ceph orch daemon add osd *&lt;host&gt;*:*&lt;device-path&gt;*</span></span></code></pre></div><p>ä¾‹å¦‚ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ceph orch daemon add osd node1:/dev/vdb</span></span></code></pre></div><blockquote><p>æ³¨æ„è¯¥ç£ç›˜å¿…é¡»æ˜¯å¹²å‡€çš„ï¼Œæœªè¢«åˆ†åŒºçš„ï¼Œå¦‚æœå·²ç»ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„æ–¹æ³•</p></blockquote><p>éƒ¨ç½²å®Œ<code>ceph</code>ä¹‹å <code>cephadm shell</code> è¿›å…¥å®¹å™¨å†…éƒ¨ï¼Œ ç„¶åæ‰§è¡Œæ“¦é™¤ç£ç›˜</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># Zap (erase!) a device so it can be re-used</span></span>
<span class="line"><span>orch device zap &lt;hostname&gt; &lt;path&gt; [--force]</span></span></code></pre></div><p><code>example</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ceph orch device zap node1 /dev/sdb --force</span></span></code></pre></div><h2 id="éƒ¨ç½²rgw" tabindex="-1">éƒ¨ç½²rgw <a class="header-anchor" href="#éƒ¨ç½²rgw" aria-label="Permalink to &quot;éƒ¨ç½²rgw&quot;">â€‹</a></h2><p><strong>ç¡®ä¿<code>ceph -s</code>çš„çŠ¶æ€ä¸º<code>HEALTH_OK</code></strong></p><p><code>Cephadm</code>å°†<code>radosgw</code>éƒ¨ç½²ä¸ºç®¡ç†ç‰¹å®šé¢†åŸŸå’ŒåŒºåŸŸçš„å®ˆæŠ¤ç¨‹åºçš„é›†åˆã€‚ï¼ˆæœ‰å…³é¢†åŸŸå’ŒåŒºåŸŸçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§Multi-Siteã€‚ï¼‰</p><p>è¯·æ³¨æ„ï¼Œä½¿ç”¨<code>cephadm</code>æ—¶ï¼Œ<code>radosgw</code>å®ˆæŠ¤ç¨‹åºæ˜¯é€šè¿‡ç›‘è§†å™¨é…ç½®æ•°æ®åº“è€Œä¸æ˜¯é€šè¿‡<code>ceph.conf</code>æˆ–å‘½ä»¤è¡Œæ¥é…ç½®çš„ã€‚å¦‚æœè¯¥é…ç½®å°šæœªå°±ç»ªï¼ˆé€šå¸¸åœ¨æœ¬ <code>client.rgw.&lt;realmname&gt;.&lt;zonename&gt;</code> èŠ‚ä¸­ï¼‰ï¼Œé‚£ä¹ˆradosgwå®ˆæŠ¤ç¨‹åºå°†ä½¿ç”¨é»˜è®¤è®¾ç½®ï¼ˆä¾‹å¦‚ï¼Œç»‘å®šåˆ°ç«¯å£80ï¼‰å¯åŠ¨ã€‚</p><p>ä¾‹å¦‚ï¼Œè¦åœ¨node1ã€node2å’Œnode3ä¸Šéƒ¨ç½²3ä¸ªæœåŠ¡äºmyorgé¢†åŸŸå’Œus-east-1åŒºåŸŸçš„rgwå®ˆæŠ¤ç¨‹åºï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚æœå°šæœªåˆ›å»ºé¢†åŸŸï¼Œè¯·é¦–å…ˆåˆ›å»ºä¸€ä¸ªé¢†åŸŸï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">radosgw-admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> realm create --rgw-realm=myorg --default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºåŸŸç»„ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">radosgw-admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zonegroup create --rgw-zonegroup=default --master --default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªåŒºåŸŸï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">radosgw-admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zone create --rgw-zonegroup=default --rgw-zone=cn-east-1 --master --default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸ºç‰¹å®šé¢†åŸŸå’ŒåŒºåŸŸéƒ¨ç½²ä¸€ç»„radosgwå®ˆæŠ¤ç¨‹åºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceph</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> orch apply rgw myorg cn-east-1 --placement=&quot;3 node1 node2 node3&quot;</span></span></code></pre></div><p>è¿™ä¸€æ­¥å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥<code>ceph -s</code>çœ‹åˆ°</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f26b5432dc4c4795af9930ee00ee206a~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ï¼Œä¸ºrgwåˆ›å»ºä¸€ä¸ªç”¨æˆ·å’Œå¼€å¯rgwçš„dashboard</p><blockquote><p>å‚è€ƒæ–‡æ¡£ <a href="https://blog.csdn.net/qq_40017427/article/details/106235456" target="_blank" rel="noreferrer">https://blog.csdn.net/qq_40017427/article/details/106235456</a></p></blockquote><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># åˆ›å»ºç”¨æˆ·</span></span>
<span class="line"><span>radosgw-admin user create --uid=rgw --display-name=rgw --system</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æä¾›Dashboardè¯ä¹¦ set-rgw-api-access-key set-rgw-api-secret-keyæ˜¯åˆ›å»ºç”¨æˆ·è¿”å›çš„</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ä¹Ÿå¯ä»¥ä½¿ç”¨ radosgw-admin user info --uid=rgw æŸ¥çœ‹</span></span>
<span class="line"><span>ceph dashboard set-rgw-api-access-key ZW1Y5IWDTB7K85P32H2A</span></span>
<span class="line"><span>ceph dashboard set-rgw-api-secret-key aehFzwMypF4V8Bm8A3baevHonEmu4E9a4oLZ1umh</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ç¦ç”¨SSL å¯ç¦ç”¨å¯ä¸ç¦ç”¨</span></span>
<span class="line"><span>ceph dashboard set-rgw-api-ssl-verify False</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å¯ç”¨rgw</span></span>
<span class="line"><span>ceph dashboard set-rgw-api-host node</span></span>
<span class="line"><span>ceph dashboard set-rgw-api-port 80</span></span>
<span class="line"><span>ceph dashboard set-rgw-api-scheme http</span></span>
<span class="line"><span>ceph dashboard set-rgw-api-user-id rgw</span></span>
<span class="line"><span></span></span>
<span class="line"><span>radosgw-admin period update --commit</span></span></code></pre></div><p>éªŒè¯è§å‚è€ƒæ–‡æ¡£</p><p>åšå®Œä¹‹ä¸€ğŸ™…æ­¥ä¹‹åå¯ä»¥é‡å¯ä¸€ä¸‹ä¸‰å°æœåŠ¡å™¨</p><p>ä½¿ç”¨<code>python</code>è®¿é—®<code>ceph</code>å¯¹è±¡å­˜å‚¨ï¼Œ å¦‚æœè¦å‰ç«¯è®¿é—®å­˜å‚¨èµ„æºæ—¶å€™å¯ä»¥ç”¨HTMLæ ‡ç­¾æ¥è®¿é—®ï¼Œä¸èƒ½æµè§ˆå™¨ç›´æ¥è®¿é—®ï¼ˆå‰æå¯ä»¥æŠŠ<code>bucket</code>çš„<code>acl</code>è®¾ç½®æˆ<code>public-read</code>æˆ–è€…æŠŠå­˜å‚¨å¯¹è±¡è®¾ç½®æˆ<code>public-read</code>ï¼‰</p><p>å‚è€ƒæ–‡æ¡£</p><p><a href="https://blog.csdn.net/nslogheyang/article/details/100115336" target="_blank" rel="noreferrer">https://blog.csdn.net/nslogheyang/article/details/100115336</a></p><h2 id="ç§»é™¤osd" tabindex="-1">ç§»é™¤osd <a class="header-anchor" href="#ç§»é™¤osd" aria-label="Permalink to &quot;ç§»é™¤osd&quot;">â€‹</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…ˆå°†è¯¥osd reweight åˆ°0ï¼Œä¹Ÿå°±æ˜¯å°†æƒé‡é™ä½åˆ°0ï¼Œè®©æ•°æ®å‰¯æœ¬åˆ†æ•£åˆ°å…¶å®ƒosdä¸Š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceph</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> osd reweight </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¾…é›†ç¾¤é‡æ–°æ¢å¤ä¸ºokåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†osdè¸¢å‡ºé›†ç¾¤</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ceph stop osd.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceph</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> osd out </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceph</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> osd crush remove osd.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceph</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auth del osd.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceph</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> osd rm osd.2</span></span></code></pre></div><h2 id="rgw" tabindex="-1">RGW <a class="header-anchor" href="#rgw" aria-label="Permalink to &quot;RGW&quot;">â€‹</a></h2><p>è®¾ç½®rgwç«¯å£</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceph</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config set client.rgw.myorg.cn-east-1 rgw_frontends &#39;beast port=7480&#39;</span></span></code></pre></div>`,76),t=[i];function l(c,h,o,d,r,g){return e(),a("div",null,t)}const b=s(n,[["render",l]]);export{u as __pageData,b as default};
